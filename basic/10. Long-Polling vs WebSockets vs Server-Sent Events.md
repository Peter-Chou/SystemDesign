# Long-Polling vs WebSockets vs Server-Sent Events

## 标准HTTP请求 
1. 客户端打开连接并向服务器请求数据
2. 服务器计算响应结果
3. 服务器通过打开的连接将结果返回给客户款

## Ajax Polling(用于大多数的Ajax application)
1. 客户端打开连接并向服务器请求数据(http)
2. 该请求会每隔一段时间(0.5s)发送到服务器
3. 服务器计算响应结果并返回给客户端
4. 客户端不断重复上述1-3步骤，以便从服务器获取更新

问题是：客户端不断的向服务器端发请求，但大部分的返回结果为空，大大增加了HTTP负载

## HTTP 长轮询(HTTP Long-Polling)
1. 客户端打开连接并向服务器请求数据(http)
2. 如果服务器没有数据则一直hold住连接，直到有数据，或者连接超时为止
3. 一旦有数据，服务器向客户端返回结果
4. 客户端收到结果后会再发一次长轮询请求。所以服务器总是有一个长轮询请求在等待
5. 没有个长轮询请求都是timeout，一旦timeout，客户端会再次发送请求

## WebSockets (TCP)
1. 客户端与服务器建立连接，通过WebSocket handshake
2. 连接建立成功后，客户端和服务器可以互相发送数据
3. 适用与实时消息系统 Whatsapp，FB messager，Wechat等

## Server-Sent Event(SSEs)
1. 客户端向服务器发送请求(http)，比如打开一个网页
2. 该请求的网页与服务器建立了连接
3. 一旦有新的数据，服务器会主动向客户端发送数据
4. 适用于显示股票实时交易数据